<!doctype html><html lang=en><head><title>M365 Business Premium Part 6: Building the Intune Foundation for Autopilot :: HalfOnCloud</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Practical Intune configuration covering tenant readiness, device targeting, Windows Hello, compliance policies and the groundwork that makes Autopilot deployments consistent."><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://halfoncloud.com/posts/m365-business-premium-part-6-intune-best-practices-device-management-foundations/><link rel=stylesheet href=https://halfoncloud.com/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css><link rel=stylesheet href=https://halfoncloud.com/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css><link rel=stylesheet href=https://halfoncloud.com/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css><link rel=stylesheet href=https://halfoncloud.com/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css><link rel=stylesheet href=https://halfoncloud.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css><link rel=stylesheet href=https://halfoncloud.com/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css><link rel=stylesheet href=https://halfoncloud.com/css/main.min.36833afd348409fc6c3d09d0897c5833d9d5bf1ff31f5e60ea3ee42ce2b1268c.css><link rel=stylesheet href=https://halfoncloud.com/css/menu.min.3c17467ebeb3d38663dce68f71f519901124fa5cbb4519b2fb0667a21e9aca39.css><link rel=stylesheet href=https://halfoncloud.com/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css><link rel=stylesheet href=https://halfoncloud.com/css/post.min.e6dddd258e64c83e05cec0cd49c05216742d42fc8ecbfbe6b67083412b609bd3.css><link rel=stylesheet href=https://halfoncloud.com/css/syntax.min.a0773cce9310cb6d8ed23e50f005448facf29a53001b57e038828daa466b25c0.css><link rel=stylesheet href=https://halfoncloud.com/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css><link rel=stylesheet href=https://halfoncloud.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css><link rel=stylesheet href=https://halfoncloud.com/style.css><link rel="shortcut icon" href=https://halfoncloud.com/favicon.png><link rel=apple-touch-icon href=https://halfoncloud.com/apple-touch-icon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="M365 Business Premium Part 6: Building the Intune Foundation for Autopilot"><meta property="og:description" content="Practical Intune configuration covering tenant readiness, device targeting, Windows Hello, compliance policies and the groundwork that makes Autopilot deployments consistent."><meta property="og:url" content="https://halfoncloud.com/posts/m365-business-premium-part-6-intune-best-practices-device-management-foundations/"><meta property="og:site_name" content="HalfOnCloud"><meta property="og:image" content="https://halfoncloud.com/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:section" content="Cloud"><meta property="article:published_time" content="2026-02-01 00:00:00 +0000 UTC"><style>body{font-family:-apple-system,BlinkMacSystemFont,segoe ui,Roboto,helvetica neue,Arial,sans-serif!important;font-size:1.05rem!important}h1,h2,h3,h4,h5,h6{font-family:-apple-system,BlinkMacSystemFont,segoe ui,Roboto,helvetica neue,Arial,sans-serif!important;font-weight:700!important}article h1,article h2,article h3,article.post h1,article.post h2,article.post h3,.content h1,.content h2,.content h3{color:#4a9eff!important;border-bottom:none!important}article.post .post-title{color:#4a9eff!important;border-bottom:none!important}article.post .post-title a{color:#4a9eff!important}.logo{background:0 0!important;padding-left:0!important;margin-left:0!important}.header__logo::after{margin-left:10px;background:repeating-linear-gradient(90deg,#4a9eff,#4a9eff 2px,transparent 0,transparent 10px)!important}img{border:none!important}article a,.post-content a{color:#4a9eff!important}article a:hover,.post-content a:hover{color:#6bb3ff!important}body,html{background-color:#1a1d2e!important}.header{margin-bottom:30px!important}.post.on-list{background:#363636;padding:20px;margin-bottom:20px;border-radius:8px}.post-title a{font-size:1.4rem!important;color:#4a9eff!important}.post-title{border-bottom:none!important;padding-bottom:0!important}.post-title::after,h1::after,h2::after,h3::after{display:none!important}.post-tags{color:#4a9eff!important}.post-tags a{color:#4a9eff!important}.post-tags a:hover{color:#6bb0ff!important}.navigation-menu a{color:#4a9eff!important}.navigation-menu a:hover{color:#6bb0ff!important}.menu__trigger{color:#4a9eff!important;border:2px solid #4a9eff!important;background-color:transparent!important}.menu__dropdown{background-color:#363636!important;border:2px solid #4a9eff!important}.menu__dropdown a{color:#4a9eff!important}.menu__dropdown a:hover{color:#6bb0ff!important;background-color:#404040!important}.read-more.button{display:inline-block!important;background-color:#4a9eff!important;color:#fff!important;padding:8px 18px!important;border-radius:28px!important;text-decoration:none!important;font-weight:600!important;transition:all .3s ease!important;border:none!important;font-size:0!important}.read-more.button::after{content:"Read More →"!important;font-size:.99rem!important;display:inline-block}.read-more.button:hover{background-color:#6bb0ff!important;transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,.2)}article ul,.post-content ul{list-style:none!important}article ul li,.post-content ul li{position:relative!important;padding-left:1.2em!important}article ul li::before,.post-content ul li::before{content:"●"!important;position:absolute!important;left:0!important;color:#4a9eff!important;font-weight:700!important}article ul ul li::before,.post-content ul ul li::before{content:"○"!important;color:#4a9eff!important}.sidebar-left ul li::before,.sidebar-right ul li::before,.sidebar-nav ul li::before,.widget-list li::before{content:none!important;display:none!important}.sidebar-left ul li,.sidebar-right ul li,.sidebar-nav ul li,.widget-list li{padding-left:0!important}.heading-link,.anchor,.zola-anchor,h1 a.anchor,h2 a.anchor,h3 a.anchor,h1>a[href^="#"],h2>a[href^="#"],h3>a[href^="#"]{display:none!important;visibility:hidden!important}.sidebar-nav a{font-weight:700!important}.sidebar-title{font-size:1.8rem!important}body.three-column-layout{display:flex;min-height:100vh;margin:0;padding:0}.sidebar-left{width:250px;min-width:250px;background-color:#13151f;border-right:1px solid #2a2d3e;position:fixed;left:0;top:0;height:100vh;overflow-y:auto;z-index:100}.sidebar-left__inner{padding:30px 20px;display:flex;flex-direction:column;align-items:center}.sidebar-avatar{margin-bottom:15px}.avatar-img{width:120px;height:120px;border-radius:50%;object-fit:cover;border:3px solid #4a9eff}.avatar-placeholder{width:120px;height:120px;border-radius:50%;background:linear-gradient(135deg,#4a9eff 0%,#6bb0ff 100%);display:flex;align-items:center;justify-content:center;font-size:3rem;font-weight:700;color:#fff}.sidebar-title{font-size:1.5rem;margin:10px 0 5px;text-align:center}.sidebar-title a{color:#fff;text-decoration:none}.sidebar-title .red{color:#f44}.sidebar-tagline{font-size:.85rem;color:#888;text-align:center;margin:0 0 25px;line-height:1.4}.sidebar-nav ul{list-style:none;padding:0;margin:0;width:100%}.sidebar-nav li{margin:5px 0}.sidebar-nav a{display:flex;align-items:center;gap:12px;padding:12px 20px;color:#ccc;text-decoration:none;border-radius:8px;transition:all .2s ease;font-size:.95rem}.sidebar-nav a:hover{background-color:#2a2d3e;color:#4a9eff}.sidebar-nav li.active a{background-color:#4a9eff;color:#fff}.sidebar-nav svg{flex-shrink:0}.main-wrapper{flex:1;margin-left:250px;margin-right:280px;min-height:100vh;padding:30px 40px;max-width:950px}.sidebar-right{width:280px;min-width:280px;background-color:#151822;border-left:1px solid #2a2d3e;position:fixed;right:0;top:0;height:100vh;overflow-y:auto;z-index:100}.sidebar-right__inner{padding:30px 20px}.widget{margin-bottom:30px}.widget-title{font-size:1rem;color:#fff;margin:0 0 15px;padding-bottom:10px;border-bottom:1px solid #2a2d3e}.widget-list{list-style:none;padding:0;margin:0}.widget-list li{margin:8px 0}.widget-list a{color:#ccc;text-decoration:none;font-size:.9rem;display:block;padding:5px 0;transition:color .2s ease}.widget-list a:hover{color:#4a9eff}.widget-tags{display:flex;flex-wrap:wrap;gap:8px}.widget-tag{display:inline-block;padding:5px 12px;background-color:#2a2d3e;color:#ccc;text-decoration:none;border-radius:15px;font-size:.8rem;transition:all .2s ease}.widget-tag:hover{background-color:#4a9eff;color:#fff}.widget-tag .count{margin-left:5px;opacity:.7}.archives h1{color:#4a9eff;margin-bottom:30px}.archive-year h2{color:#4a9eff;font-size:1.3rem;margin:25px 0 15px;padding-left:10px;border-left:3px solid #4a9eff}.archive-posts{list-style:none;padding:0;margin:0}.archive-posts li{padding:8px 0;display:flex;align-items:center;gap:15px}.archive-date{color:#888;font-size:.85rem;min-width:60px}.archive-posts a{color:#ccc;text-decoration:none}.archive-posts a:hover{color:#4a9eff}body.three-column-layout .header{display:none}@media(max-width:1200px){.sidebar-right{display:none}.main-wrapper{margin-right:0}}@media(max-width:768px){body.three-column-layout{flex-direction:column}.sidebar-left{width:100%;min-width:100%;position:relative;height:auto;border-right:none;border-bottom:1px solid #2a2d3e}.sidebar-left__inner{padding:20px;height:auto}.sidebar-nav ul{display:flex;flex-wrap:wrap;justify-content:center;gap:5px}.sidebar-nav a{padding:8px 15px}.avatar-img,.avatar-placeholder{width:80px;height:80px;font-size:2rem}.main-wrapper{margin-left:0;padding:20px}.sidebar-right{display:none}.sidebar-social{position:relative;bottom:auto;margin-top:15px}}@media(max-width:768px){.sidebar-social{position:relative!important;bottom:auto!important;width:100%!important;margin-top:20px!important;padding-top:15px!important;border-top:1px solid #2a2d3e}.sidebar-nav ul{width:100%}}@media(max-width:768px){.main-wrapper{overflow-x:hidden!important;max-width:100vw!important}article img,.post-content img,.content img{max-width:100%!important;height:auto!important}pre,code{max-width:100%!important;overflow-x:auto!important;white-space:pre-wrap!important;word-wrap:break-word!important}.post-title,article h1,article h2{word-wrap:break-word!important;overflow-wrap:break-word!important}}.search-widget{margin-bottom:25px}.search-box{position:relative;display:flex;align-items:center}.search-icon{position:absolute;left:12px;color:#888;pointer-events:none}#search-input{width:100%;padding:12px 15px 12px 40px;background-color:#2a2d3e;border:1px solid #3a3d4e;border-radius:8px;color:#fff;font-size:.9rem;outline:none;transition:all .2s ease}#search-input:focus{border-color:#4a9eff;box-shadow:0 0 0 3px rgba(74,158,255,.2)}#search-input::placeholder{color:#666}#search-results{margin-top:10px;max-height:400px;overflow-y:auto}#search-results:empty{display:none}.search-result-item{padding:10px;margin:5px 0;background-color:#2a2d3e;border-radius:6px;transition:background-color .2s ease}.search-result-item:hover{background-color:#3a3d4e}.search-result-item a{color:#4a9eff;text-decoration:none;font-size:.9rem;display:block}.search-result-item .search-date{font-size:.75rem;color:#888;margin-top:3px}.search-result-item .search-snippet{font-size:.8rem;color:#aaa;margin-top:5px;line-height:1.4}.search-no-results{color:#888;font-size:.85rem;padding:10px;text-align:center}.post-featured-image{margin:20px 0 30px;border-radius:8px;overflow:hidden}.post-featured-image img{width:100%;height:auto;display:block}.terms h1{color:#4a9eff!important;margin-bottom:20px}.terms ul{list-style:none!important;padding:0;margin:0}.terms li{margin:12px 0;display:flex;align-items:center;gap:10px}.terms li::before{display:none!important;content:none!important}.terms li svg{color:#4a9eff!important;flex-shrink:0}.terms a,.terms li a,.terms ul li a{color:#4a9eff!important;text-decoration:none!important;font-size:1.1rem;transition:color .2s ease}.terms a:hover,.terms li a:hover,.terms ul li a:hover{color:#6bb0ff!important}.main-wrapper{margin:0 auto!important}.avatar-img{width:300px!important;height:auto!important;border-radius:20px!important;object-fit:contain!important}.sidebar-social{display:flex;gap:15px;justify-content:center;position:absolute;bottom:30px;left:0;right:0}.sidebar-social a{color:#888;transition:color .2s ease}.sidebar-social a:hover{color:#4a9eff}</style></head><body class=three-column-layout><aside class=sidebar-left><div class=sidebar-left__inner><div class=sidebar-avatar><a href=https://halfoncloud.com/><img src=/images/avatar.png alt=HalfOnCloud class=avatar-img></a></div><h2 class=sidebar-title><a href=https://halfoncloud.com/>Half<span class=red>On</span>Cloud</a></h2><p class=sidebar-tagline>IT tutorials, automation scripts, and real-world solutions</p><nav class=sidebar-nav><ul><li><a href=https://halfoncloud.com/><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
Home</a></li><li><a href=https://halfoncloud.com/categories/><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg>
Categories</a></li><li><a href=https://halfoncloud.com/tags/><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
Tags</a></li><li><a href=https://halfoncloud.com/archives/><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
Archives</a></li><li><a href=https://halfoncloud.com/about/><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
About</a></li></ul></nav><div class=sidebar-social><a href=https://x.com/HeyRadu target=_blank rel=noopener title=X/Twitter><svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
</a><a href=https://linkedin.com/in/radu-bogdan target=_blank rel=noopener title=LinkedIn><svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853.0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601.0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144.0-2.063-.926-2.063-2.065.0-1.138.92-2.063 2.063-2.063 1.14.0 2.064.925 2.064 2.063.0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225.0H1.771C.792.0.0.774.0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2.0 22.222.0h.003z"/></svg></a></div></div></aside><aside class=sidebar-right><div class=sidebar-right__inner><div class="widget search-widget"><div class=search-box><svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
<input type=text id=search-input placeholder=Search... autocomplete=off></div><div id=search-results></div></div><div class=widget><h3 class=widget-title>Recent Posts</h3><ul class=widget-list><li><a href=https://halfoncloud.com/posts/m365-business-premium-part-6-intune-best-practices-device-management-foundations/>M365 Business Premium Part 6: Building the Intune Foundation for Autopilot</a></li><li><a href=https://halfoncloud.com/posts/powershell-script-installer-for-win32-part2-m365-apps-and-delivery-optimization/>M365 Apps Deployment with PowerShell Installer & Delivery Optimization Gotchas</a></li><li><a href=https://halfoncloud.com/posts/m365-business-premium-part-5-intune-conditional-access-policies/>M365 Business Premium Part 5: Conditional Access Policies</a></li><li><a href=https://halfoncloud.com/posts/powershell-script-for-intune-win32-apps/>PowerShell script installer for Win32 apps Guide</a></li><li><a href=https://halfoncloud.com/posts/microsoft-intune-declarative-device-management-ddm/>Microsoft Intune Declarative Device Management (DDM) Guide</a></li></ul></div><div class=widget><h3 class=widget-title>Categories</h3><div class=widget-tags><a href=https://halfoncloud.com/categories/%23deliveryoptimization/ class=widget-tag>#DeliveryOptimization <span class=count>1</span>
</a><a href=https://halfoncloud.com/categories/%23m365apps/ class=widget-tag>#M365Apps <span class=count>1</span>
</a><a href=https://halfoncloud.com/categories/%23msintune/ class=widget-tag>#MSIntune  <span class=count>1</span>
</a><a href=https://halfoncloud.com/categories/%23powershell/ class=widget-tag>#PowerShell <span class=count>1</span>
</a><a href=https://halfoncloud.com/categories/%23win32/ class=widget-tag>#Win32  <span class=count>1</span>
</a><a href=https://halfoncloud.com/categories/cloud/ class=widget-tag>Cloud <span class=count>9</span>
</a><a href=https://halfoncloud.com/categories/general/ class=widget-tag>General <span class=count>1</span></a></div></div><div class=widget><h3 class=widget-title>Tags</h3><div class=widget-tags><a href=https://halfoncloud.com/tags/about/ class=widget-tag>About <span class=count>1</span>
</a><a href=https://halfoncloud.com/tags/compliancepolicies/ class=widget-tag>CompliancePolicies <span class=count>1</span>
</a><a href=https://halfoncloud.com/tags/configurationprofiles/ class=widget-tag>ConfigurationProfiles <span class=count>1</span>
</a><a href=https://halfoncloud.com/tags/ddm/ class=widget-tag>DDM <span class=count>1</span>
</a><a href=https://halfoncloud.com/tags/devicemanagement/ class=widget-tag>DeviceManagement <span class=count>1</span>
</a><a href=https://halfoncloud.com/tags/entraid/ class=widget-tag>EntraID <span class=count>5</span>
</a><a href=https://halfoncloud.com/tags/licensing/ class=widget-tag>Licensing <span class=count>3</span>
</a><a href=https://halfoncloud.com/tags/m365/ class=widget-tag>M365 <span class=count>5</span>
</a><a href=https://halfoncloud.com/tags/mmp-c/ class=widget-tag>MMP-C <span class=count>1</span>
</a><a href=https://halfoncloud.com/tags/msintune/ class=widget-tag>MSIntune <span class=count>10</span>
</a><a href=https://halfoncloud.com/tags/powershell/ class=widget-tag>PowerShell <span class=count>2</span>
</a><a href=https://halfoncloud.com/tags/security/ class=widget-tag>Security <span class=count>1</span>
</a><a href=https://halfoncloud.com/tags/win32/ class=widget-tag>Win32 <span class=count>2</span>
</a><a href=https://halfoncloud.com/tags/windc/ class=widget-tag>WinDC <span class=count>1</span></a></div></div></div></aside><div class=main-wrapper><div class=content><article class=post><header class=post-header><h1 class=post-title>M365 Business Premium Part 6: Building the Intune Foundation for Autopilot</h1><div class=post-meta><time class=post-date>2026-02-01</time>
<span class=post-author>Radu Bogdan</span></div><span class=post-tags>#<a href=https://halfoncloud.com/tags/msintune/>MSIntune</a>&nbsp;
#<a href=https://halfoncloud.com/tags/entraid/>EntraID</a>&nbsp;
#<a href=https://halfoncloud.com/tags/devicemanagement/>DeviceManagement</a>&nbsp;
#<a href=https://halfoncloud.com/tags/compliancepolicies/>CompliancePolicies</a>&nbsp;
#<a href=https://halfoncloud.com/tags/configurationprofiles/>ConfigurationProfiles</a>&nbsp;</span></header><div class=post-content><h2 id=building-a-production-ready-intune-environment>Building a Production-Ready Intune Environment</h2><p>This article walks through an Intune environment built in a small lab tenant. The focus is on the foundation that needs to be in place before Windows Autopilot can work reliably: tenant readiness, enrollment controls, device targeting, ESP behavior and a security baseline that holds up under real use. Everything shown reflects actual configuration, including what is enabled and how the pieces connect together.</p><p>The environment is Windows-only and centered on User Driven Autopilot with Microsoft Entra join. The screenshots walk through tenant health, service connectors, dynamic device groups and Enrollment Status Page behavior along with a few optimizations.</p><p>This includes a deliberate ESP blocking app strategy where Company Portal, VMware Tools and Microsoft 365 Apps are required during Autopilot installation. Because this is a small environment made up entirely of VMware Workstation Pro VMs, including VMware Tools was easier and efficient ensuring full driver support especially for the display adapter, while the Skip User ESP configuration helps reduce delays right after enrollment.</p><p>On the security side this article focuses on establishing a clean and enforceable baseline before Autopilot comes into play. This includes Windows Hello for Business configured through the Settings Catalog, TPM backed credential protection suitable for virtual machines and a production style compliance policy that validates BitLocker, Secure Boot, Defender health, OS version, Firewall state and Defender for Endpoint risk level. Non compliance actions and user notifications are configured so policy enforcement is visible from both the admin and user perspectives.</p><p>Think of this setup as the foundation along with a set of decisions that make the Autopilot experience in the next article stable, repeatable and easier to understand when something does not behave as expected.</p><h3 id=tenant-administration-overview>Tenant Administration Overview</h3><p>Before looking at device policies and configurations, it helps to start with the health of the Intune tenant itself. The <strong>Tenant Admin | Tenant Status</strong> blade in the Intune admin center provides a quick snapshot of the foundation the rest of the configuration depends on.</p><h4 id=tenant-details>Tenant Details</h4><p>The first tab shows basic tenant information such as tenant name, datacenter location, service release version, MDM authority, account status, total enrolled devices and available Intune licenses. This view makes it easy to confirm that the tenant is active, properly licensed and running on the expected service release.</p><p><img src=/images/Blog_P16_000.jpg alt></p><h4 id=connector-status>Connector Status</h4><p>The second tab shows the health of various connectors that integrate Intune with other services. For Windows-focused environments, the key connectors to watch are <strong>Windows Autopilot last sync date</strong> and <strong>Microsoft Defender for Endpoint Connector</strong>. A healthy status with recent sync timestamps means the tenant is communicating properly with these services.</p><p>Connectors marked as not enabled are not an issue here. They simply reflect services that are not in scope for this environment. APNS and DEP apply to Apple devices, Google Play connectors apply to Android and JAMF is used for macOS management through a third party MDM.</p><p><img src=/images/Blog_P16_001.jpg alt></p><h3 id=automatic-enrollment-configuration>Automatic Enrollment Configuration</h3><p>The Automatic Enrollment settings determine which users can enroll Windows devices into Intune MDM management, the <strong>MDM user scope</strong> being set to &ldquo;<em>All</em>&rdquo; which means any user in the tenant can enroll devices.</p><p>The three URLs from the screenshot below are the endpoints that Windows uses during enrollment, Microsoft&rsquo;s default URLs and rarely need modification. The MDM terms of use URL points to a generic terms page, the discovery URL is how devices find the enrollment server and the compliance URL is where devices check their compliance status.</p><p>Note: The <strong>Windows Information Protection (WIP)</strong> section at the bottom shows the deprecation notice, WIP is no longer supported for new deployments so the scope is set to &ldquo;None&rdquo;. Organizations still using WIP should plan their migration to Microsoft Purview Information Protection.</p><p><img src=/images/Blog_P6_014.jpg alt></p><h3 id=windows-data-and-diagnostic-configuration>Windows Data and Diagnostic Configuration</h3><p>Under <strong>Tenant Administration -> Connectors and tokens -> Windows data</strong>, two settings control diagnostic data collection for the tenant:</p><p><strong>Windows data</strong> enables features that require Windows diagnostic data in processor configuration. This unlocks detailed reporting capabilities for Windows Updates, including installation stages, error codes and failure reasons. Without this enabled only basic service-side data is available, not enough for a valuable troubleshooting.</p><p><strong>Windows license verification</strong> confirms the tenant has appropriate licensing for advanced features like Windows 11 Upgrade Readiness reports and Proactive Remediations, Microsoft 365 Business Premium includes the required licensing.</p><h3 id=the-auto-created-policy>The Auto-Created Policy</h3><p>Here&rsquo;s something that might catch some administrators off guard: when these settings are enabled and Endpoint Analytics is accessed for the first time, Intune automatically creates a configuration profile called &ldquo;<em>Intune data collection policy</em>.&rdquo; This isn&rsquo;t something that needs to be manually configured since Intune generates it as part of the onboarding process.</p><p>This auto-created policy is a Windows health monitoring profile that deploys to all devices and enables the telemetry collection required for Endpoint Analytics. It configures devices to send startup performance metrics, application reliability scores and device health signals back to the Intune service.</p><p>The relationship works like this: the tenant-level toggle in Windows data enables the infrastructure, while the auto-created policy deploys the configuration to devices that actually collects and sends the data.</p><p>Note: The policy can be safely renamed to match organizational naming conventions despite being auto-created, it&rsquo;s a standard configuration profile under full administrative control.</p><p><img src=/images/Blog_P6_003.jpg alt></p><h3 id=endpoint-analytics-settings>Endpoint Analytics Settings</h3><p>The Endpoint Analytics Settings page shows the data collection status for the tenant. The <strong>Intune data collection policy</strong> is listed as &ldquo;<em>Connected</em>&rdquo; which means devices are actively sending user experience data back to Intune. This telemetry powers the reports visible in the left navigation: Startup performance, Application reliability, Work from anywhere, Resource performance and Battery health.</p><p>Below that is the <strong>Configuration Manager data collection</strong> option which remains &ldquo;<em>Not connected</em>&rdquo; at least in my environment for the time being. This would only be relevant for organizations running a hybrid setup with on-premises Microsoft Configuration Manager (SCCM) and tenant attach configured.</p><p><img src=/images/Blog_P6_004.jpg alt></p><h3 id=windows-health-monitoring-profile>Windows Health Monitoring Profile</h3><p>This is the configuration profile that actually deploys to devices to enable health monitoring.
The profile itself is straightforward with just two settings: Health monitoring set to <strong>Enable</strong> and Scope set to <strong>Endpoint analytics</strong>. This profile was auto-created when Endpoint Analytics was first accessed which I&rsquo;ve also manually renamed to <strong>GBL-WIN11-EndpointAnalytics-(ALL)</strong> to align with my naming standards convention:</p><p><img src=/images/Blog_P6_005.jpg alt></p><h3 id=windows-enrollment-overview>Windows Enrollment Overview</h3><p>The <strong>Devices | Enrollment</strong> blade is the central hub for everything related to getting devices into Intune with various enrollment options available.</p><p>On the right side, the <strong>CNAME Validation</strong> panel confirms that the DNS records for the custom domain are configured properly. The green checkmark next to &ldquo;<em>CNAME for devworkplace.cloud is configured correctly</em>&rdquo; means users can enroll devices using their email addresses without needing to manually specify the MDM server address.</p><p>Both records can also be verified from the command line, the <strong>enterpriseenrollment</strong> record points to the Intune MDM enrollment endpoint while <strong>enterpriseregistration</strong> handles Azure AD device registration:</p><p><img src=/images/Blog_P6_010.jpg alt></p><p>The page is organized into three sections:</p><ul><li><strong>Enrollment options</strong> covers the day-to-day settings like automatic enrollment scope and device restrictions.</li><li><strong>Windows Autopilot device preparation</strong> is the newer v2 provisioning method.</li><li><strong>Windows Autopilot</strong> at the bottom contains the traditional v1 Autopilot components including device registration, deployment profiles and the Enrollment Status Page (ESP).</li></ul><p><img src=/images/Blog_P6_009.jpg alt></p><h3 id=device-platform-restrictions>Device Platform Restrictions</h3><p>Platform restrictions act as a gatekeeper for enrollment, determining which device types are allowed to enroll in the first place. This is different from compliance policies which evaluate devices after they are already enrolled.</p><p>Each platform can be set to Allow or Block, the <strong>versions</strong> column lets you restrict enrollment to specific OS versions using the major.minor.build format. The <strong>Personally owned</strong> column controls whether users can enroll their personal devices or only corporate-owned devices.</p><p>In this environment the focus is currently on Windows virtual machines running in VMware Workstation for lab testing and learning purposes. The plan is to eventually bring mobile devices into management as well, likely starting with Android and then iOS down the road.</p><p>Version restrictions only apply to Company Portal enrollments not Autopilot. Devices are considered personally owned by default unless explicitly marked otherwise. Manufacturer restrictions are not supported for Windows since hardware comes from a wide range of vendors.</p><p><img src=/images/Blog_P6_015.jpg alt></p><h3 id=device-limit-restrictions>Device Limit Restrictions</h3><p>Device limit restrictions control how many devices each user can enroll in Intune. The default policy &ldquo;All users and all devices&rdquo; allows up to <strong>10</strong> devices per user which is usually sufficient for most scenarios.</p><p>This limit applies across all device types combined, if a user has enrolled 10 devices and tries to add another, the enrollment will be blocked until they remove an existing device. For organizations with users who legitimately need more devices, additional restriction policies can be created and assigned to specific groups with higher limits.</p><p>Note: The priority system mentioned at the top means that if a user is targeted by multiple restriction policies, the one with the highest priority wins.</p><p><img src=/images/Blog_P6_013.jpg alt></p><h3 id=autopilot-deployment-profile>Autopilot Deployment Profile</h3><p>My custom <strong>GBL_WIN11_Autopilot_AAD_ALL</strong> deployment profile defines how Windows devices behave during the Out of Box Experience when they are provisioned through Autopilot.</p><p>This profile is configured for <strong>User-Driven deployment</strong> with devices joining <strong>Microsoft Entra ID</strong>. That means the end user signs in during OOBE and the device is directly joined to Entra ID without any hybrid dependency. This keeps the flow simple and efficient for cloud-only environments.</p><p>Several OOBE screens are intentionally hidden including Microsoft Software License Terms, Privacy settings and the option to change the account type. Hiding these screens shortens the setup flow and avoids unnecessary prompts that do not add value in a managed environment. The user account type is set to <strong>Standard</strong> which aligns with least-privilege practices and avoids handing out local admin rights by default.</p><p>The device naming strategy uses a template based on the hardware serial number. This ensures every device receives a predictable and unique name at enrollment time, without relying on manual input or post-deployment renaming.</p><p>Pre-provisioned deployment is disabled as this environment focuses on user-driven scenarios rather than technician-led staging. The profile is assigned to the <strong>GRP-Devices-Autopilot</strong> dynamic group, ensuring that any device matching the Autopilot targeting logic automatically receives the same deployment experience.</p><p><img src=/images/Blog_P16_004.jpg alt></p><h3 id=enrollment-status-page>Enrollment Status Page</h3><p>The <strong>GBL_WIN11_ESP_Standard_ALL</strong> Enrollment Status Page controls what happens after the Autopilot process starts and before the user is allowed to access the desktop.</p><p>The ESP is configured to <strong>show app and profile installation progress</strong> giving visibility into what is happening during setup. A time limit of <strong>90 minutes</strong> is defined after which a clear and user-friendly error message is displayed if installation takes too long. Log collection and diagnostics are enabled which makes troubleshooting much easier when a deployment fails or stalls.</p><p>Device use is <strong>blocked until all required apps and profiles are installed</strong>, this is a deliberate choice to ensure the device reaches a known good state before it is handed over to the user. Users are not allowed to bypass errors or reset the device from the ESP, keeping the process controlled and predictable.</p><p>Windows Updates during ESP are disabled in this setup, avoiding extending enrollment time and keeping update management under separate policies after the device is fully provisioned.</p><p>A key part of this configuration is the <strong>blocking app list</strong>, in my environment three apps are required to complete before ESP finishes:</p><ul><li>Company Portal</li><li>Microsoft 365 Apps</li><li>VMware Tools</li></ul><p>These apps were selected because they are foundational for usability and management. Company Portal enables user interaction with Intune, Microsoft 365 Apps provides immediate productivity and VMware Tools ensures proper driver support for the virtual machines used in the lab, especially for display and input performance.</p><p>The ESP is assigned to the same <strong>GRP-Devices-Autopilot</strong> group as the deployment profile, ensuring consistent behavior across all Autopilot enrolled devices. Devices are not released to users until the essentials are in place, while still providing visibility and diagnostics when something goes wrong.</p><p><img src=/images/Blog_P16_024.jpg alt></p><h3 id=dynamic-group-configuration>Dynamic Group Configuration</h3><p>The <strong>GRP-Devices-Autopilot</strong> group is a dynamic security group used to automatically target devices that belong to this Autopilot deployment flow. Instead of assigning devices manually, membership is calculated based on metadata that is already present on Autopilot registered devices.</p><p>This group relies on an Autopilot GroupTag strategy, when a device is registered in Autopilot it is assigned a GroupTag value. That value is stored in Microsoft Entra ID as part of the device physical identifiers exposed through the <em>devicePhysicalIds</em> attribute.</p><p>The dynamic membership rule I&rsquo;m using into my Intune tenant is this:</p><p><em>(device.devicePhysicalIds -any (_ -contains &ldquo;[OrderId]:A-RO-U-D-&rdquo;))</em></p><p>Checks whether any of the device physical identifiers contain the specified OrderId prefix. Devices that match the <strong>A-RO-U-D-</strong> pattern are automatically added to the group as soon as they appear in the tenant.</p><p>Using this approach provides a clean separation between different device types, environments, or deployment scenarios. GroupTags can be used to distinguish labs from production, regions, ownership models or enrollment flows without changing group logic later. New devices only need the correct GroupTag during registration and everything else follows automatically.</p><p>In my environment the dynamic group acts as the single entry point for Autopilot targeting. The Autopilot deployment profile, Enrollment Status Page, Skip User ESP configuration and related policies are all assigned to this group. This ensures that any device matching the GroupTag receives a consistent and predictable configuration from the moment enrollment begins.</p><p>The main advantage of this model is scalability and control. As the environment grows new devices can be onboarded simply by assigning the correct GroupTag with no need to touch group assignments or policy scope again.</p><p><img src=/images/Blog_P16_008.jpg alt></p><h3 id=skip-user-esp-configuration>Skip User ESP Configuration</h3><p>The <strong>GBL-WIN11-Autopilot-SkipUserESP-(ALL)</strong> policy exists to solve a very specific Autopilot annoyance: the User ESP phase often adds time and unpredictability without providing much value once the device side of provisioning is already complete.</p><p>In a user driven Autopilot flow ESP normally runs in two stages, the device phase installs device targeted apps and policies followed by the user phase, which waits for user targeted assignments to complete before allowing access to the desktop. In practice this second phase is frequently where delays occur especially when user scoped apps like Company Portal are involved.</p><p><img src=/images/Blog_P16_010.jpg alt></p><p>This policy uses a custom OMA-URI setting to explicitly skip the <strong>User ESP</strong> phase. The configuration sets <strong>SkipUserStatusPage</strong> to <strong>True</strong>:</p><p><em>./Device/Vendor/MSFT/DMClient/Provider/MS DM Server/FirstSyncStatus/SkipUserStatusPage</em></p><p>With this setting applied Autopilot completes immediately after the device ESP phase finishes and does not block completion while waiting for user targeted policies during ESP. User scoped apps and policies are not skipped, they continue processing after the user signs in.</p><p>This approach works well in environments where device scoped configuration and required applications are already enforced during device ESP. By removing the User ESP blocking behavior, the setup time is reduced while management, compliance and post enrollment processing remain intact.</p><p>In my environment the policy is assigned to the same <strong>GRP-Devices-Autopilot</strong> dynamic group used by the Autopilot profile and ESP configuration. This keeps the enrollment flow consistent and ensures that every device following this Autopilot path benefits from the same optimization, with user-targeted workloads shifting to post-login processing.</p><p><img src=/images/Blog_P16_012.jpg alt></p><h3 id=windows-hello-for-business-configuration>Windows Hello for Business Configuration</h3><p>The <strong>GBL-WIN11-WindowsHello-(ALL)</strong> policy configures Windows Hello for Business using the <strong>Settings Catalog</strong>. This reflects the current Microsoft recommended approach and makes the policy easier to maintain and extend over time.</p><p><img src=/images/Blog_P16_013.jpg alt></p><p>Only 10 (out of 36) available settings are configured which keeps the policy focused instead of overly restrictive. Biometrics are enabled and <strong>security key sign-in</strong> is allowed providing flexibility beyond PIN-only authentication.</p><p>The PIN configuration is intentionally strict but reasonable, PINs are <strong>numeric-only</strong> with uppercase letters, lowercase letters and special characters explicitly blocked. The minimum PIN length is <strong>6 digits</strong> with a maximum of <strong>127</strong> and the system remembers the <strong>last 24 PINs</strong> to prevent reuse.</p><p>A <strong>security device is required</strong> which in this lab translates to the <strong>virtual TPM (vTPM)</strong> provided by VMware rather than a physical TPM. This still enables Windows Hello for Business to use hardware-backed protection from the guest OS perspective with no external security keys (for example YubiKeys) are used at this stage.</p><p>PIN expiration is set to <strong>365 days</strong> which is reasonable for a controlled lab environment and helps avoid unnecessary user friction while still exercising lifecycle behavior.</p><p>Overall this configuration enforces strong, hardware-backed authentication while remaining practical for day-to-day use in a lab and development environment.</p><p><img src=/images/Blog_P16_015.jpg alt></p><h3 id=non-compliance-actions-and-notification>Non-Compliance Actions and Notification</h3><p>Non-compliance handling is intentionally simple and visible as soon as a device falls out of compliance, it is marked <strong>non-compliant immediately</strong>. End user notification is delayed by <strong>one day</strong>, avoiding spamming users for short-lived conditions such as a pending reboot, a Defender definition update or Windows Updates still finishing in the background. If the device remains non-compliant after 24 hours the user receives a clear and actionable email.</p><p><img src=/images/Blog_P16_020.jpg alt></p><p>The notification template is explicit about what typically causes non-compliance in my environment: BitLocker not enabled, Defender or Firewall not running or missing security updates. It also gives concrete steps the user can take on their own before escalating to IT, such as restarting the device and completing Windows Update.</p><p>The message sets expectations clearly, users are informed that they have <strong>seven days</strong> to remediate the issue before access to company resources may be restricted. This ties compliance enforcement to a real timeline rather than a silent policy that only administrators see.</p><p><img src=/images/Blog_P16_022.jpg alt></p><p>These settings control how long Intune trusts a device’s last known compliance state. The compliance status validity period is set to seven days, meaning devices that stop reporting to Intune remain compliant for up to a week before being marked non-compliant due to stale status. This is independent of the non-compliance actions above which apply immediately once a device actively fails a compliance check.</p><p><img src=/images/Blog_P16_023.jpg alt></p><h3 id=compliance-policy-configuration>Compliance Policy Configuration</h3><p>The <strong>GBL-WIN11-Compliance-Production</strong> policy defines the baseline compliance requirements for Windows 11 devices. It is created as a Windows 10/11 compliance policy and targets Windows devices consistently across the environment.</p><p><img src=/images/Blog_P16_016.jpg alt></p><p>At a high level the policy focuses on device health, platform security and credential management ensuring that only devices meeting a minimum security standard are considered compliant. Overall this compliance policy is intentionally strict enough to exercise real world security controls, while remaining practical for a small VM based lab environment where the goal is to validate Intune behavior, reporting and enforcement rather than to simulate physical endpoint security in full.</p><p>From a device health perspective, <strong>BitLocker</strong>, <strong>Secure Boot</strong> and <strong>Code Integrity</strong> are all required. In my environment these controls rely on VMware’s virtual TPM and virtual Secure Boot which are sufficient for testing compliance behavior, reporting, even though they do not provide the same assurance as physical hardware.</p><p>The <strong>minimum OS version</strong> is set to <strong>Windows 11 24H2 (10.0.26100)</strong> preventing older builds from being marked compliant and keeping the test environment aligned with current Windows 11 baselines.</p><p>Under <strong>System Security</strong> the policy enforces full disk encryption, firewall availability, TPM presence and active antimalware protection. Microsoft Defender Antivirus, antispyware, real-time protection and up-to-date security intelligence are all required. This ensures the device is actively protected rather than simply having security components installed.</p><p>The <strong>Device Security</strong> section defines local credential requirements, a password is required to unlock the device, with a numeric-only minimum length of <strong>6</strong>, a <strong>365-day expiration</strong> and <strong>24 previous passwords</strong> blocked from reuse. The device must prompt for credentials after <strong>15 minutes of inactivity</strong> and immediately when returning from idle state. These settings align with the Windows Hello for Business PIN configuration used elsewhere in the environment, keeping authentication behavior consistent.</p><p>Finally the policy integrates with <strong>Microsoft Defender for Endpoint</strong>, requiring the device to be at or below a <strong>Low</strong> machine risk score to remain compliant.</p><p>Devices are <strong>marked noncompliant immediately</strong> when any of the required conditions are no longer met. This ensures that compliance status reflects the current security posture without delay and can be acted on by Conditional Access policies in near real time.</p><p>An <strong>email notification is sent to the end user after one day</strong> of continued noncompliance. This short delay avoids false positives caused by transient conditions, such as pending restarts or security updates still in progress, while still prompting timely remediation.</p><p><img src=/images/Blog_P16_025.jpg alt></p><hr><h2 id=whats-next>What&rsquo;s next</h2><p>With tenant readiness confirmed, enrollment controls in place, ESP behavior tuned and a compliance baseline that covers BitLocker, Defender, Secure Boot and credential management, the foundation is set.</p><p>The next article moves from configuration to execution, walking through an actual Intune Autopilot deployment and showing how these settings behave during real device provisioning.</p></div><footer class=post-footer><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><a href=https://halfoncloud.com/posts/powershell-script-installer-for-win32-part2-m365-apps-and-delivery-optimization/ class="button inline next">[<span class=button__text>M365 Apps Deployment with PowerShell Installer & Delivery Optimization Gotchas</span>] ></a></div></div></footer></article></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user" style=text-align:center><span>&copy; 2026 Radu Bogdan :: HalfOnCloud</span></div></div></footer><script type=text/javascript src=/bundle.min.js></script><style>.image-overlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.9);z-index:9999;cursor:pointer;justify-content:center;align-items:center}.image-overlay.active{display:flex}.image-overlay img{max-width:95%;max-height:95%;border:2px solid #fff;object-fit:contain}article img{cursor:pointer}</style><div class=image-overlay id=imageOverlay><img src alt="Enlarged image" id=overlayImage></div><script>document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("imageOverlay"),t=document.getElementById("overlayImage");document.querySelectorAll("article img").forEach(function(n){n.addEventListener("click",function(){t.src=this.src,e.classList.add("active")})}),e.addEventListener("click",function(){e.classList.remove("active")}),document.addEventListener("keydown",function(t){t.key==="Escape"&&e.classList.remove("active")})})</script><script>(function(){let n=null;const t=document.getElementById("search-input"),e=document.getElementById("search-results");if(!t||!e)return;fetch("/index.json").then(e=>e.json()).then(e=>{n=e}).catch(e=>console.log("Search index not found"));function o(e,t){let n;return function(...s){clearTimeout(n),n=setTimeout(()=>e.apply(this,s),t)}}function s(t){if(!n||t.length<2){e.innerHTML="";return}const s=n.filter(e=>{const n=(e.title+" "+e.contents+" "+(e.tags||[]).join(" ")).toLowerCase();return n.includes(t.toLowerCase())}).slice(0,8);if(s.length===0){e.innerHTML='<div class="search-no-results">No results found</div>';return}e.innerHTML=s.map(e=>{const o=e.contents.toLowerCase(),i=t.toLowerCase();let n="";const s=o.indexOf(i);if(s!==-1){const o=Math.max(0,s-40),i=Math.min(e.contents.length,s+t.length+60);n=(o>0?"...":"")+e.contents.substring(o,i)+(i<e.contents.length?"...":"")}else n=e.contents.substring(0,100)+"...";return`
                <div class="search-result-item">
                    <a href="${e.permalink}">${e.title}</a>
                    <div class="search-date">${e.date}</div>
                    <div class="search-snippet">${n}</div>
                </div>
            `}).join("")}t.addEventListener("input",o(function(e){s(e.target.value.trim())},300)),document.addEventListener("click",function(n){!t.contains(n.target)&&!e.contains(n.target)&&(e.innerHTML="")}),t.addEventListener("focus",function(){this.value.length>=2&&s(this.value.trim())})})()</script></div></body></html>